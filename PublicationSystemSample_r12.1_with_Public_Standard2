
CREATE TABLE "ERWIN9"."AUT"
(
	"AUT_NO"             VARCHAR2(20)  NOT NULL ,
	"AUT_NM"             VARCHAR2(100)  NOT NULL ,
	"AUT_TELNO"          VARCHAR2(11)  NULL ,
	"AUT_BSC_ADDR"       VARCHAR2(200)  NOT NULL ,
	"AUT_DADDR"          VARCHAR2(200)  NULL ,
	"AUT_ZIP"            CHAR(5)  NOT NULL  CHECK ([zip] like '[0-9][0-9][0-9][0-9][0-9]')
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_auidind" ON "ERWIN9"."AUT"
("AUT_NO"   ASC);

ALTER TABLE "ERWIN9"."AUT"
	ADD  PRIMARY KEY ("AUT_NO");

CREATE INDEX "ERWIN9"."aunmind" ON "ERWIN9"."AUT"
("AUT_NM"   ASC);

COMMENT ON TABLE "ERWIN9"."AUT" IS '저자' ;

COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_NO" is '저자번호' ;
COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_NM" is '저자명' ;
COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_TELNO" is '저자전화번호' ;
COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_BSC_ADDR" is '저자기본주소' ;
COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_DADDR" is '저자상세주소' ;
COMMENT ON COLUMN "ERWIN9"."AUT"."AUT_ZIP" is '저자우편번호' ;


CREATE TABLE "ERWIN9"."AUT_BOOK"
(
	"AUT_NO"             VARCHAR2(20)  NOT NULL ,
	"BOOK_NO"            VARCHAR2(20)  NOT NULL ,
	"CRTR_YR"            CHAR(4)  NOT NULL ,
	"ANL_ACMLT_NTSL_AMT" NUMBER(15)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_taind" ON "ERWIN9"."AUT_BOOK"
("AUT_NO"   ASC,"BOOK_NO"   ASC,"CRTR_YR"   ASC);

ALTER TABLE "ERWIN9"."AUT_BOOK"
	ADD  PRIMARY KEY ("AUT_NO","BOOK_NO","CRTR_YR");

COMMENT ON TABLE "ERWIN9"."AUT_BOOK" IS '저자도서' ;

COMMENT ON COLUMN "ERWIN9"."AUT_BOOK"."AUT_NO" is '저자번호' ;
COMMENT ON COLUMN "ERWIN9"."AUT_BOOK"."BOOK_NO" is '도서번호' ;
COMMENT ON COLUMN "ERWIN9"."AUT_BOOK"."CRTR_YR" is '기준연도' ;
COMMENT ON COLUMN "ERWIN9"."AUT_BOOK"."ANL_ACMLT_NTSL_AMT" is '연간누적판매금액' ;


CREATE TABLE "ERWIN9"."PBLRC"
(
	"PBLRC_NO"           VARCHAR2(20)  NOT NULL ,
	"PBLRC_NM"           VARCHAR2(100)  NOT NULL ,
	"PBLRC_BSC_ADDR"     VARCHAR2(200)  NOT NULL ,
	"PBLRC_DADDR"        VARCHAR2(200)  NULL ,
	"PBLRC_ZIP"          CHAR(5)  NOT NULL  CHECK ([zip] like '[0-9][0-9][0-9][0-9][0-9]')
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_pubind" ON "ERWIN9"."PBLRC"
("PBLRC_NO"   ASC);

ALTER TABLE "ERWIN9"."PBLRC"
	ADD  PRIMARY KEY ("PBLRC_NO");

COMMENT ON TABLE "ERWIN9"."PBLRC" IS '출판사' ;

COMMENT ON COLUMN "ERWIN9"."PBLRC"."PBLRC_NO" is '출판사번호' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC"."PBLRC_NM" is '출판사명' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC"."PBLRC_BSC_ADDR" is '출판사기본주소' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC"."PBLRC_DADDR" is '출판사상세주소' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC"."PBLRC_ZIP" is '출판사우편번호' ;


CREATE TABLE "ERWIN9"."PBLRC_LGO"
(
	"PBLRC_NO"           VARCHAR2(20)  NOT NULL ,
	"LGO_SE_CD"          CHAR(3)  NOT NULL ,
	"PBLRC_LGO_FILE_NM"  VARCHAR2(300)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_pubinfo" ON "ERWIN9"."PBLRC_LGO"
("PBLRC_NO"   ASC,"LGO_SE_CD"   ASC);

ALTER TABLE "ERWIN9"."PBLRC_LGO"
	ADD  PRIMARY KEY ("PBLRC_NO","LGO_SE_CD");

COMMENT ON TABLE "ERWIN9"."PBLRC_LGO" IS '출판사로고' ;

COMMENT ON COLUMN "ERWIN9"."PBLRC_LGO"."PBLRC_NO" is '출판사번호' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC_LGO"."LGO_SE_CD" is '로고구분코드' ;
COMMENT ON COLUMN "ERWIN9"."PBLRC_LGO"."PBLRC_LGO_FILE_NM" is '출판사로고파일명' ;


CREATE TABLE "ERWIN9"."BOOK"
(
	"BOOK_NO"            VARCHAR2(20)  NOT NULL ,
	"BOOK_NM"            VARCHAR2(100)  NOT NULL ,
	"BOOK_SE_CD"         CHAR(3)  DEFAULT 'UNDECIDED'  NOT NULL ,
	"PBLRC_NO"           VARCHAR2(20)  NOT NULL ,
	"NTSL_PRC"           NUMBER(15)  NOT NULL ,
	"ISBN"               VARCHAR2(13)  NULL ,
	"PRCNT_AMT"          NUMBER(15)  NOT NULL ,
	"RYTS_GIVE_BGNG_YMD" DATETIME  NOT NULL ,
	"BOOK_SMRY_CN"       VARCHAR2(1000)  NULL ,
	"PBL_YMD"            DATETIME  NOT NULL ,
	"RYTS_GIVE_EXPRY_YMD" DATETIME  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_titleidind" ON "ERWIN9"."BOOK"
("BOOK_NO"   ASC);

ALTER TABLE "ERWIN9"."BOOK"
	ADD  PRIMARY KEY ("BOOK_NO");

CREATE INDEX "ERWIN9"."titleind" ON "ERWIN9"."BOOK"
("BOOK_NM"   ASC);

COMMENT ON TABLE "ERWIN9"."BOOK" IS '도서' ;

COMMENT ON COLUMN "ERWIN9"."BOOK"."BOOK_NO" is '도서번호' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."BOOK_NM" is '도서명' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."BOOK_SE_CD" is '도서구분코드' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."PBLRC_NO" is '출판사번호' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."NTSL_PRC" is '판매가격' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."ISBN" is 'ISBN' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."PRCNT_AMT" is '선지급금액' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."RYTS_GIVE_BGNG_YMD" is '인세지급시작일자' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."RYTS_GIVE_EXPRY_YMD" is '인세지급만료일자' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."BOOK_SMRY_CN" is '도서개요내용' ;
COMMENT ON COLUMN "ERWIN9"."BOOK"."PBL_YMD" is '출판일자' ;


CREATE TABLE "ERWIN9"."CRCD"
(
	"STLM_NO"            VARCHAR2(20)  NOT NULL ,
	"CARD_NO"            VARCHAR2(16)  NOT NULL ,
	"CARD_EXPRY_YMD"     DATETIME  NOT NULL ,
	"CRCD_SE_CD"         CHAR(3)  NOT NULL ,
	"CARD_CO_NM"         VARCHAR2(100)  NOT NULL ,
	"CRCD_AMT"           NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK신용카드" ON "ERWIN9"."CRCD"
("STLM_NO"   ASC);

ALTER TABLE "ERWIN9"."CRCD"
	ADD  PRIMARY KEY ("STLM_NO");

COMMENT ON TABLE "ERWIN9"."CRCD" IS '신용카드' ;

COMMENT ON COLUMN "ERWIN9"."CRCD"."STLM_NO" is '결제번호' ;
COMMENT ON COLUMN "ERWIN9"."CRCD"."CARD_NO" is '카드번호' ;
COMMENT ON COLUMN "ERWIN9"."CRCD"."CARD_EXPRY_YMD" is '카드만료일자' ;
COMMENT ON COLUMN "ERWIN9"."CRCD"."CRCD_SE_CD" is '신용카드구분코드' ;
COMMENT ON COLUMN "ERWIN9"."CRCD"."CARD_CO_NM" is '카드회사명' ;
COMMENT ON COLUMN "ERWIN9"."CRCD"."CRCD_AMT" is '신용카드금액' ;


CREATE TABLE "ERWIN9"."CRDT_CHK"
(
	"CRDT_INQ_NO"        VARCHAR2(20)  NOT NULL ,
	"STLM_NO"            VARCHAR2(20)  NOT NULL ,
	"CRDT_INQ_YMD"       DATETIME  NULL ,
	"CRDT_STTS_CD"       CHAR(3)  NULL ,
	"LAST_IDNTY_YMD"     DATETIME  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK신용수표" ON "ERWIN9"."CRDT_CHK"
("CRDT_INQ_NO"   ASC);

ALTER TABLE "ERWIN9"."CRDT_CHK"
	ADD  PRIMARY KEY ("CRDT_INQ_NO");

COMMENT ON TABLE "ERWIN9"."CRDT_CHK" IS '신용수표' ;

COMMENT ON COLUMN "ERWIN9"."CRDT_CHK"."CRDT_INQ_NO" is '신용조회번호' ;
COMMENT ON COLUMN "ERWIN9"."CRDT_CHK"."STLM_NO" is '결제번호' ;
COMMENT ON COLUMN "ERWIN9"."CRDT_CHK"."CRDT_INQ_YMD" is '신용조회일자' ;
COMMENT ON COLUMN "ERWIN9"."CRDT_CHK"."CRDT_STTS_CD" is '신용상태코드' ;
COMMENT ON COLUMN "ERWIN9"."CRDT_CHK"."LAST_IDNTY_YMD" is '최종확인일자' ;


CREATE TABLE "ERWIN9"."CUST"
(
	"CUST_NO"            VARCHAR2(20)  NOT NULL ,
	"CUST_NM"            VARCHAR2(100)  NOT NULL ,
	"CUST_BSC_ADDR"      VARCHAR2(200)  NOT NULL ,
	"CUST_DADDR"         VARCHAR2(200)  NULL ,
	"CUST_ZIP"           CHAR(5)  NOT NULL  CHECK ([zip] like '[0-9][0-9][0-9][0-9][0-9]'),
	"CUST_TELNO"         VARCHAR2(11)  NOT NULL ,
	"CUST_FXNO"          VARCHAR2(11)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK고객" ON "ERWIN9"."CUST"
("CUST_NO"   ASC);

ALTER TABLE "ERWIN9"."CUST"
	ADD  PRIMARY KEY ("CUST_NO");

CREATE INDEX "ERWIN9"."XIE1고객" ON "ERWIN9"."CUST"
("CUST_NM"   ASC);

COMMENT ON TABLE "ERWIN9"."CUST" IS '고객' ;

COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_NO" is '고객번호' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_NM" is '고객명' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_BSC_ADDR" is '고객기본주소' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_DADDR" is '고객상세주소' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_ZIP" is '고객우편번호' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_TELNO" is '고객전화번호' ;
COMMENT ON COLUMN "ERWIN9"."CUST"."CUST_FXNO" is '고객팩스번호' ;


CREATE TABLE "ERWIN9"."DSCNT"
(
	"DSCNT_CD"           CHAR(3)  NOT NULL ,
	"MIN_PRCHS_QTY"      NUMERIC(14)  NOT NULL ,
	"MAX_PRCHS_QTY"      NUMERIC(14)  NOT NULL ,
	"DSCNT_RT"           NUMERIC(5,2)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK할인" ON "ERWIN9"."DSCNT"
("DSCNT_CD"   ASC);

ALTER TABLE "ERWIN9"."DSCNT"
	ADD  PRIMARY KEY ("DSCNT_CD");

COMMENT ON TABLE "ERWIN9"."DSCNT" IS '할인' ;

COMMENT ON COLUMN "ERWIN9"."DSCNT"."DSCNT_CD" is '할인코드' ;
COMMENT ON COLUMN "ERWIN9"."DSCNT"."MIN_PRCHS_QTY" is '최저구매수량' ;
COMMENT ON COLUMN "ERWIN9"."DSCNT"."MAX_PRCHS_QTY" is '최대구매수량' ;
COMMENT ON COLUMN "ERWIN9"."DSCNT"."DSCNT_RT" is '할인율' ;


CREATE TABLE "ERWIN9"."JBTTL"
(
	"JBTTL_CD"           CHAR(3)  NOT NULL ,
	"JBTTL_NM"           VARCHAR2(100)  DEFAULT 'New Position - title not formalized yet'  NOT NULL ,
	"MIN_PY_CRTR_AMT"    NUMBER(15)  NULL  CHECK ("MIN_PY_CRTR_AMT" >= 10),
	"MAX_PY_CRTR_AMT"    NUMBER(15)  NULL  CHECK ("MAX_PY_CRTR_AMT" <= 250)
);

CREATE UNIQUE INDEX "ERWIN9"."PK__jobs__117F9D94" ON "ERWIN9"."JBTTL"
("JBTTL_CD"   ASC);

ALTER TABLE "ERWIN9"."JBTTL"
	ADD  PRIMARY KEY ("JBTTL_CD");

COMMENT ON TABLE "ERWIN9"."JBTTL" IS '직책' ;

COMMENT ON COLUMN "ERWIN9"."JBTTL"."JBTTL_CD" is '직책코드' ;
COMMENT ON COLUMN "ERWIN9"."JBTTL"."JBTTL_NM" is '직책명' ;
COMMENT ON COLUMN "ERWIN9"."JBTTL"."MIN_PY_CRTR_AMT" is '최저급여기준금액' ;
COMMENT ON COLUMN "ERWIN9"."JBTTL"."MAX_PY_CRTR_AMT" is '최대급여기준금액' ;


CREATE TABLE "ERWIN9"."EMP"
(
	"EMP_NO"             VARCHAR2(20)  NOT NULL ,
	"EMP_NM"             VARCHAR2(100)  NOT NULL ,
	"RRNO"               CHAR(13)  NOT NULL ,
	"JBTTL_CD"           CHAR(3)  NOT NULL ,
	"EMP_JBTTL_NM"       VARCHAR2(100)  DEFAULT 10  NOT NULL ,
	"EMP_EMPMNT_YMD"     DATETIME  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."PK_emp_id" ON "ERWIN9"."EMP"
("EMP_NO"   ASC);

ALTER TABLE "ERWIN9"."EMP"
	ADD  PRIMARY KEY ("EMP_NO");

CREATE INDEX "ERWIN9"."employee_ind" ON "ERWIN9"."EMP"
("EMP_NM"   ASC);

COMMENT ON TABLE "ERWIN9"."EMP" IS '직원' ;

COMMENT ON COLUMN "ERWIN9"."EMP"."EMP_NO" is '직원번호' ;
COMMENT ON COLUMN "ERWIN9"."EMP"."EMP_NM" is '직원명' ;
COMMENT ON COLUMN "ERWIN9"."EMP"."RRNO" is '주민등록번호' ;
COMMENT ON COLUMN "ERWIN9"."EMP"."JBTTL_CD" is '직책코드' ;
COMMENT ON COLUMN "ERWIN9"."EMP"."EMP_JBTTL_NM" is '직원직책명' ;
COMMENT ON COLUMN "ERWIN9"."EMP"."EMP_EMPMNT_YMD" is '직원고용일자' ;


CREATE TABLE "ERWIN9"."newtable"
(
	"a"                  CHAR(18)  NOT NULL ,
	"b"                  CHAR(18)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPKnewtable" ON "ERWIN9"."newtable"
("a"   ASC);

ALTER TABLE "ERWIN9"."newtable"
	ADD  PRIMARY KEY ("a");

COMMENT ON TABLE "ERWIN9"."newtable" IS 'newtable' ;

COMMENT ON COLUMN "ERWIN9"."newtable"."a" is 'a' ;
COMMENT ON COLUMN "ERWIN9"."newtable"."b" is 'b' ;


CREATE TABLE "ERWIN9"."STR"
(
	"STR_NO"             VARCHAR2(20)  NOT NULL ,
	"STR_NM"             VARCHAR2(100)  NOT NULL ,
	"STR_BSC_ADDR"       VARCHAR2(200)  NOT NULL ,
	"STR_DADDR"          VARCHAR2(200)  NULL ,
	"STR_ZIP"            CHAR(5)  NOT NULL  CHECK ([zip] like '[0-9][0-9][0-9][0-9][0-9]'),
	"RGN_NO"             VARCHAR2(20)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."UPK_storeid" ON "ERWIN9"."STR"
("STR_NO"   ASC);

ALTER TABLE "ERWIN9"."STR"
	ADD  PRIMARY KEY ("STR_NO");

COMMENT ON TABLE "ERWIN9"."STR" IS '가게' ;

COMMENT ON COLUMN "ERWIN9"."STR"."STR_NO" is '가게번호' ;
COMMENT ON COLUMN "ERWIN9"."STR"."STR_NM" is '가게명' ;
COMMENT ON COLUMN "ERWIN9"."STR"."STR_BSC_ADDR" is '가게기본주소' ;
COMMENT ON COLUMN "ERWIN9"."STR"."STR_DADDR" is '가게상세주소' ;
COMMENT ON COLUMN "ERWIN9"."STR"."STR_ZIP" is '가게우편번호' ;
COMMENT ON COLUMN "ERWIN9"."STR"."RGN_NO" is '지역번호' ;


CREATE TABLE "ERWIN9"."PRCHSORDR"
(
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"STR_NO"             VARCHAR2(20)  NOT NULL ,
	"ORDR_YMD"           DATETIME  NOT NULL ,
	"STLM_YMD"           DATETIME  NOT NULL ,
	"CUST_NO"            VARCHAR2(20)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."UPKCL_sales" ON "ERWIN9"."PRCHSORDR"
("ORDR_NO"   ASC);

ALTER TABLE "ERWIN9"."PRCHSORDR"
	ADD  PRIMARY KEY ("ORDR_NO");

COMMENT ON TABLE "ERWIN9"."PRCHSORDR" IS '구매주문' ;

COMMENT ON COLUMN "ERWIN9"."PRCHSORDR"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."PRCHSORDR"."STR_NO" is '가게번호' ;
COMMENT ON COLUMN "ERWIN9"."PRCHSORDR"."ORDR_YMD" is '주문일자' ;
COMMENT ON COLUMN "ERWIN9"."PRCHSORDR"."STLM_YMD" is '결제일자' ;
COMMENT ON COLUMN "ERWIN9"."PRCHSORDR"."CUST_NO" is '고객번호' ;


CREATE TABLE "ERWIN9"."ORDR_CMDTY"
(
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"CMDTY_NO"           VARCHAR2(20)  NOT NULL ,
	"BOOK_NO"            VARCHAR2(20)  NOT NULL ,
	"ORDR_QTY"           NUMERIC(14)  NOT NULL ,
	"DSCNT_CD"           CHAR(3)  NOT NULL ,
	"ORDR_DSCNT_AMT"     NUMBER(15)  NOT NULL ,
	"ORDR_AMT"           NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK주문물품" ON "ERWIN9"."ORDR_CMDTY"
("ORDR_NO"   ASC,"CMDTY_NO"   ASC);

ALTER TABLE "ERWIN9"."ORDR_CMDTY"
	ADD  PRIMARY KEY ("ORDR_NO","CMDTY_NO");

COMMENT ON TABLE "ERWIN9"."ORDR_CMDTY" IS '주문물품' ;

COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."CMDTY_NO" is '물품번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."BOOK_NO" is '도서번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."ORDR_QTY" is '주문수량' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."DSCNT_CD" is '할인코드' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."ORDR_DSCNT_AMT" is '주문할인금액' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_CMDTY"."ORDR_AMT" is '주문금액' ;


CREATE TABLE "ERWIN9"."RGN"
(
	"RGN_NO"             VARCHAR2(20)  NOT NULL ,
	"RGN_NM"             VARCHAR2(40)  NOT NULL ,
	"RGN_EXPLNCN"        VARCHAR2(1000)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK지역" ON "ERWIN9"."RGN"
("RGN_NO"   ASC);

ALTER TABLE "ERWIN9"."RGN"
	ADD  PRIMARY KEY ("RGN_NO");

COMMENT ON TABLE "ERWIN9"."RGN" IS '지역' ;

COMMENT ON COLUMN "ERWIN9"."RGN"."RGN_NO" is '지역번호' ;
COMMENT ON COLUMN "ERWIN9"."RGN"."RGN_NM" is '지역명' ;
COMMENT ON COLUMN "ERWIN9"."RGN"."RGN_EXPLNCN" is '지역설명내용' ;


CREATE TABLE "ERWIN9"."RYTS"
(
	"RYTS_NO"            VARCHAR2(20)  NOT NULL ,
	"MIN_RYTS_GIVE_AMT"  NUMBER(15)  NULL ,
	"MAX_RYTS_GIVE_AMT"  NUMBER(15)  NULL ,
	"RYTS_AMT"           NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK인세" ON "ERWIN9"."RYTS"
("RYTS_NO"   ASC);

ALTER TABLE "ERWIN9"."RYTS"
	ADD  PRIMARY KEY ("RYTS_NO");

COMMENT ON TABLE "ERWIN9"."RYTS" IS '인세' ;

COMMENT ON COLUMN "ERWIN9"."RYTS"."RYTS_NO" is '인세번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS"."MIN_RYTS_GIVE_AMT" is '최저인세지급금액' ;
COMMENT ON COLUMN "ERWIN9"."RYTS"."MAX_RYTS_GIVE_AMT" is '최대인세지급금액' ;
COMMENT ON COLUMN "ERWIN9"."RYTS"."RYTS_AMT" is '인세금액' ;


CREATE TABLE "ERWIN9"."RYTS_STLM"
(
	"AUT_NO"             VARCHAR2(20)  NOT NULL ,
	"BOOK_NO"            VARCHAR2(20)  NOT NULL ,
	"CRTR_YR"            CHAR(4)  NOT NULL ,
	"RYTS_NO"            VARCHAR2(20)  NOT NULL ,
	"STLM_YMD"           DATETIME  NOT NULL ,
	"STLM_AMT"           NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK인세결제" ON "ERWIN9"."RYTS_STLM"
("AUT_NO"   ASC,"BOOK_NO"   ASC,"CRTR_YR"   ASC,"RYTS_NO"   ASC);

ALTER TABLE "ERWIN9"."RYTS_STLM"
	ADD  PRIMARY KEY ("AUT_NO","BOOK_NO","CRTR_YR","RYTS_NO");

COMMENT ON TABLE "ERWIN9"."RYTS_STLM" IS '인세결제' ;

COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."AUT_NO" is '저자번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."BOOK_NO" is '도서번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."CRTR_YR" is '기준연도' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."RYTS_NO" is '인세번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."STLM_YMD" is '결제일자' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_STLM"."STLM_AMT" is '결제금액' ;


CREATE TABLE "ERWIN9"."RYTS_HSTRY"
(
	"RYTS_HSTRY_NO"      VARCHAR2(20)  NOT NULL ,
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"CMDTY_NO"           VARCHAR2(20)  NOT NULL ,
	"RYTS_STLM_YMD"      DATETIME  NOT NULL ,
	"RYTS_STLM_AMT"      NUMBER(15)  NOT NULL ,
	"RYTS_ADDRSE_NM"     VARCHAR2(100)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK인세이력" ON "ERWIN9"."RYTS_HSTRY"
("RYTS_HSTRY_NO"   ASC);

ALTER TABLE "ERWIN9"."RYTS_HSTRY"
	ADD  PRIMARY KEY ("RYTS_HSTRY_NO");

COMMENT ON TABLE "ERWIN9"."RYTS_HSTRY" IS '인세이력' ;

COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."RYTS_HSTRY_NO" is '인세이력번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."CMDTY_NO" is '물품번호' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."RYTS_STLM_YMD" is '인세결제일자' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."RYTS_STLM_AMT" is '인세결제금액' ;
COMMENT ON COLUMN "ERWIN9"."RYTS_HSTRY"."RYTS_ADDRSE_NM" is '인세수취인명' ;


CREATE TABLE "ERWIN9"."SNDBK_BOOK"
(
	"SNDBK_NO"           VARCHAR2(20)  NOT NULL ,
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"CMDTY_NO"           VARCHAR2(20)  NOT NULL ,
	"BOOK_SNDBK_YMD"     DATETIME  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK반송도서" ON "ERWIN9"."SNDBK_BOOK"
("SNDBK_NO"   ASC);

ALTER TABLE "ERWIN9"."SNDBK_BOOK"
	ADD  PRIMARY KEY ("SNDBK_NO");

COMMENT ON TABLE "ERWIN9"."SNDBK_BOOK" IS '반송도서' ;

COMMENT ON COLUMN "ERWIN9"."SNDBK_BOOK"."SNDBK_NO" is '반송번호' ;
COMMENT ON COLUMN "ERWIN9"."SNDBK_BOOK"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."SNDBK_BOOK"."CMDTY_NO" is '물품번호' ;
COMMENT ON COLUMN "ERWIN9"."SNDBK_BOOK"."BOOK_SNDBK_YMD" is '도서반송일자' ;


CREATE TABLE "ERWIN9"."ORDR_DLVY"
(
	"ORDR_DLVY_NO"       VARCHAR2(20)  NOT NULL ,
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"CMDTY_NO"           VARCHAR2(20)  NOT NULL ,
	"WBILL_ADDR"         VARCHAR2(200)  NOT NULL ,
	"CMDTY_SNDNG_ADDR"   VARCHAR2(200)  NOT NULL ,
	"DLVY_STTS_CD"       CHAR(3)  NOT NULL ,
	"DLVY_RSVT_YMD"      DATETIME  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK주문배송" ON "ERWIN9"."ORDR_DLVY"
("ORDR_DLVY_NO"   ASC,"ORDR_NO"   ASC,"CMDTY_NO"   ASC);

ALTER TABLE "ERWIN9"."ORDR_DLVY"
	ADD  PRIMARY KEY ("ORDR_DLVY_NO","ORDR_NO","CMDTY_NO");

COMMENT ON TABLE "ERWIN9"."ORDR_DLVY" IS '주문배송' ;

COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."ORDR_DLVY_NO" is '주문배송번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."CMDTY_NO" is '물품번호' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."WBILL_ADDR" is '운송장주소' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."CMDTY_SNDNG_ADDR" is '물품발송주소' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."DLVY_STTS_CD" is '배송상태코드' ;
COMMENT ON COLUMN "ERWIN9"."ORDR_DLVY"."DLVY_RSVT_YMD" is '배송예약일자' ;


CREATE TABLE "ERWIN9"."CROVR_ORDR"
(
	"ORDR_DLVY_NO"       VARCHAR2(20)  NOT NULL ,
	"ORDR_NO"            VARCHAR2(20)  NOT NULL ,
	"CMDTY_NO"           VARCHAR2(20)  NOT NULL ,
	"DLVY_CROVR_YMD"     DATETIME  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK이월주문" ON "ERWIN9"."CROVR_ORDR"
("ORDR_DLVY_NO"   ASC,"ORDR_NO"   ASC,"CMDTY_NO"   ASC);

ALTER TABLE "ERWIN9"."CROVR_ORDR"
	ADD  PRIMARY KEY ("ORDR_DLVY_NO","ORDR_NO","CMDTY_NO");

COMMENT ON TABLE "ERWIN9"."CROVR_ORDR" IS '이월주문' ;

COMMENT ON COLUMN "ERWIN9"."CROVR_ORDR"."ORDR_DLVY_NO" is '주문배송번호' ;
COMMENT ON COLUMN "ERWIN9"."CROVR_ORDR"."ORDR_NO" is '주문번호' ;
COMMENT ON COLUMN "ERWIN9"."CROVR_ORDR"."CMDTY_NO" is '물품번호' ;
COMMENT ON COLUMN "ERWIN9"."CROVR_ORDR"."DLVY_CROVR_YMD" is '배송이월일자' ;


CREATE TABLE "ERWIN9"."PSNL_CHK"
(
	"STLM_NO"            VARCHAR2(20)  NOT NULL ,
	"CHK_NO"             VARCHAR2(14)  NOT NULL ,
	"CHK_ACTNO"          VARCHAR2(20)  NOT NULL ,
	"CHK_BANK_CD"        CHAR(3)  NOT NULL ,
	"CHK_AMT"            NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK개인수표" ON "ERWIN9"."PSNL_CHK"
("STLM_NO"   ASC);

COMMENT ON TABLE "ERWIN9"."PSNL_CHK" IS '개인수표' ;

COMMENT ON COLUMN "ERWIN9"."PSNL_CHK"."STLM_NO" is '결제번호' ;
COMMENT ON COLUMN "ERWIN9"."PSNL_CHK"."CHK_NO" is '수표번호' ;
COMMENT ON COLUMN "ERWIN9"."PSNL_CHK"."CHK_ACTNO" is '수표계좌번호' ;
COMMENT ON COLUMN "ERWIN9"."PSNL_CHK"."CHK_BANK_CD" is '수표은행코드' ;
COMMENT ON COLUMN "ERWIN9"."PSNL_CHK"."CHK_AMT" is '수표금액' ;


CREATE TABLE "ERWIN9"."PSTMNORD"
(
	"STLM_NO"            VARCHAR2(20)  NOT NULL ,
	"PSTMNORD_NO"        CHAR(11)  NOT NULL ,
	"PSTMNORD_AMT"       NUMBER(15)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK우편환" ON "ERWIN9"."PSTMNORD"
("STLM_NO"   ASC);

COMMENT ON TABLE "ERWIN9"."PSTMNORD" IS '우편환' ;

COMMENT ON COLUMN "ERWIN9"."PSTMNORD"."STLM_NO" is '결제번호' ;
COMMENT ON COLUMN "ERWIN9"."PSTMNORD"."PSTMNORD_NO" is '우편환번호' ;
COMMENT ON COLUMN "ERWIN9"."PSTMNORD"."PSTMNORD_AMT" is '우편환금액' ;


CREATE TABLE "ERWIN9"."STLM"
(
	"STLM_NO"            VARCHAR2(20)  NOT NULL ,
	"STLM_SE_CD"         CHAR(3)  NOT NULL ,
	"STLM_YMD"           DATETIME  NOT NULL ,
	"STLM_AMT"           NUMBER(15)  NOT NULL ,
	"추가COL_"           CHAR(18)  NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK결제" ON "ERWIN9"."STLM"
("STLM_NO"   ASC);

ALTER TABLE "ERWIN9"."STLM"
	ADD  PRIMARY KEY ("STLM_NO");

COMMENT ON TABLE "ERWIN9"."STLM" IS '결제' ;

COMMENT ON COLUMN "ERWIN9"."STLM"."STLM_NO" is '결제번호' ;
COMMENT ON COLUMN "ERWIN9"."STLM"."STLM_SE_CD" is '결제구분코드' ;
COMMENT ON COLUMN "ERWIN9"."STLM"."STLM_YMD" is '결제일자' ;
COMMENT ON COLUMN "ERWIN9"."STLM"."STLM_AMT" is '결제금액' ;
COMMENT ON COLUMN "ERWIN9"."STLM"."추가COL_" is '추가컬럼' ;


CREATE TABLE "ERWIN9"."RPTP"
(
	"RPTP_NO"            VARCHAR2(20)  NOT NULL ,
	"WRTR_NO"            VARCHAR2(20)  NOT NULL ,
	"RPTP_NM"            VARCHAR2(300)  NOT NULL ,
	"RPTP_FILE_NM"       VARCHAR2(300)  NOT NULL 
);

CREATE UNIQUE INDEX "ERWIN9"."XPK보고서" ON "ERWIN9"."RPTP"
("RPTP_NO"   ASC,"WRTR_NO"   ASC);

ALTER TABLE "ERWIN9"."RPTP"
	ADD  PRIMARY KEY ("RPTP_NO","WRTR_NO");

COMMENT ON TABLE "ERWIN9"."RPTP" IS '보고서' ;

COMMENT ON COLUMN "ERWIN9"."RPTP"."RPTP_NO" is '보고서번호' ;
COMMENT ON COLUMN "ERWIN9"."RPTP"."WRTR_NO" is '작성자번호' ;
COMMENT ON COLUMN "ERWIN9"."RPTP"."RPTP_NM" is '보고서명' ;
COMMENT ON COLUMN "ERWIN9"."RPTP"."RPTP_FILE_NM" is '보고서파일명' ;


CREATE VIEW "ERWIN9"."titleview" ( "Book_Name","Author_Identification","MRSP_Price","Publisher_Identification" ) 
	 AS  SELECT "ERWIN9"."BOOK"."BOOK_NM","ERWIN9"."AUT_BOOK"."AUT_NO","ERWIN9"."BOOK"."NTSL_PRC","ERWIN9"."BOOK"."PBLRC_NO"
		FROM "ERWIN9"."BOOK" ,"ERWIN9"."AUT_BOOK" ,"ERWIN9"."AUT" ;

CREATE VIEW "ERWIN9"."Order_View" ( "Store_Name","Order_Number","Order_Date","Book_Name","Order_Quantity","Order_Discount_Amount","Order_Price" ) 
	 AS  SELECT "ERWIN9"."STR"."STR_NM","ERWIN9"."PRCHSORDR"."ORDR_NO","ERWIN9"."PRCHSORDR"."ORDR_YMD","ERWIN9"."BOOK"."BOOK_NM","ERWIN9"."ORDR_CMDTY"."ORDR_QTY","ERWIN9"."ORDR_CMDTY"."ORDR_DSCNT_AMT","ERWIN9"."ORDR_CMDTY"."ORDR_AMT"
		FROM "ERWIN9"."ORDR_CMDTY" ,"ERWIN9"."BOOK" ,"ERWIN9"."PRCHSORDR" ,"ERWIN9"."STR" ;

CREATE VIEW "ERWIN9"."Publisher_View" ( "Employee_First_Name","Publisher_Name","Book_Name" ) 
	 AS  SELECT "ERWIN9"."EMP"."EMP_NM","ERWIN9"."PBLRC"."PBLRC_NM","ERWIN9"."BOOK"."BOOK_NM"
		FROM "ERWIN9"."PBLRC" ,"ERWIN9"."BOOK" ,"ERWIN9"."EMP" ;

CREATE VIEW "ERWIN9"."Payment_View" ( "Credit_Card_Number","Credit_Card_Amount","Money_Order_Number","Money_Order_Amount","Check_Number","Check_Amount","Customer_First_Name","Order_Number","Order_Date" ) 
	 AS  SELECT "ERWIN9"."CRCD"."CARD_NO","ERWIN9"."CRCD"."CRCD_AMT","ERWIN9"."PSTMNORD"."PSTMNORD_NO","ERWIN9"."PSTMNORD"."PSTMNORD_AMT","ERWIN9"."PSNL_CHK"."CHK_NO","ERWIN9"."PSNL_CHK"."CHK_AMT","ERWIN9"."CUST"."CUST_NM","ERWIN9"."PRCHSORDR"."ORDR_NO","ERWIN9"."PRCHSORDR"."ORDR_YMD"
		FROM "ERWIN9"."PSTMNORD" ,"ERWIN9"."STLM" ,"ERWIN9"."CRCD" ,"ERWIN9"."PSNL_CHK" ,"ERWIN9"."CUST" ,"ERWIN9"."PRCHSORDR" ;

ALTER TABLE "ERWIN9"."AUT_BOOK"
	ADD (FOREIGN KEY ("AUT_NO") REFERENCES "ERWIN9"."AUT" ("AUT_NO"));

ALTER TABLE "ERWIN9"."AUT_BOOK"
	ADD (FOREIGN KEY ("BOOK_NO") REFERENCES "ERWIN9"."BOOK" ("BOOK_NO"));

ALTER TABLE "ERWIN9"."PBLRC_LGO"
	ADD (FOREIGN KEY ("PBLRC_NO") REFERENCES "ERWIN9"."PBLRC" ("PBLRC_NO"));

ALTER TABLE "ERWIN9"."BOOK"
	ADD (FOREIGN KEY ("PBLRC_NO") REFERENCES "ERWIN9"."PBLRC" ("PBLRC_NO"));

ALTER TABLE "ERWIN9"."CRCD"
	ADD (FOREIGN KEY ("STLM_NO") REFERENCES "ERWIN9"."STLM" ("STLM_NO") ON DELETE CASCADE);

ALTER TABLE "ERWIN9"."CRDT_CHK"
	ADD (FOREIGN KEY ("STLM_NO") REFERENCES "ERWIN9"."CRCD" ("STLM_NO"));

ALTER TABLE "ERWIN9"."EMP"
	ADD (FOREIGN KEY ("JBTTL_CD") REFERENCES "ERWIN9"."JBTTL" ("JBTTL_CD"));

ALTER TABLE "ERWIN9"."STR"
	ADD (FOREIGN KEY ("RGN_NO") REFERENCES "ERWIN9"."RGN" ("RGN_NO") ON DELETE SET NULL);

ALTER TABLE "ERWIN9"."PRCHSORDR"
	ADD (FOREIGN KEY ("CUST_NO") REFERENCES "ERWIN9"."CUST" ("CUST_NO") ON DELETE SET NULL);

ALTER TABLE "ERWIN9"."PRCHSORDR"
	ADD (FOREIGN KEY ("STR_NO") REFERENCES "ERWIN9"."STR" ("STR_NO"));

ALTER TABLE "ERWIN9"."ORDR_CMDTY"
	ADD (FOREIGN KEY ("DSCNT_CD") REFERENCES "ERWIN9"."DSCNT" ("DSCNT_CD") ON DELETE SET NULL);

ALTER TABLE "ERWIN9"."ORDR_CMDTY"
	ADD (FOREIGN KEY ("ORDR_NO") REFERENCES "ERWIN9"."PRCHSORDR" ("ORDR_NO"));

ALTER TABLE "ERWIN9"."ORDR_CMDTY"
	ADD (FOREIGN KEY ("BOOK_NO") REFERENCES "ERWIN9"."BOOK" ("BOOK_NO"));

ALTER TABLE "ERWIN9"."RYTS_STLM"
	ADD (FOREIGN KEY ("RYTS_NO") REFERENCES "ERWIN9"."RYTS" ("RYTS_NO"));

ALTER TABLE "ERWIN9"."RYTS_STLM"
	ADD (FOREIGN KEY ("AUT_NO", "BOOK_NO", "CRTR_YR") REFERENCES "ERWIN9"."AUT_BOOK" ("AUT_NO", "BOOK_NO", "CRTR_YR"));

ALTER TABLE "ERWIN9"."RYTS_HSTRY"
	ADD (FOREIGN KEY ("ORDR_NO", "CMDTY_NO") REFERENCES "ERWIN9"."ORDR_CMDTY" ("ORDR_NO", "CMDTY_NO") ON DELETE SET NULL);

ALTER TABLE "ERWIN9"."SNDBK_BOOK"
	ADD (FOREIGN KEY ("ORDR_NO", "CMDTY_NO") REFERENCES "ERWIN9"."ORDR_CMDTY" ("ORDR_NO", "CMDTY_NO") ON DELETE SET NULL);

ALTER TABLE "ERWIN9"."ORDR_DLVY"
	ADD (FOREIGN KEY ("ORDR_NO", "CMDTY_NO") REFERENCES "ERWIN9"."ORDR_CMDTY" ("ORDR_NO", "CMDTY_NO"));

ALTER TABLE "ERWIN9"."CROVR_ORDR"
	ADD (FOREIGN KEY ("ORDR_DLVY_NO", "ORDR_NO", "CMDTY_NO") REFERENCES "ERWIN9"."ORDR_DLVY" ("ORDR_DLVY_NO", "ORDR_NO", "CMDTY_NO"));

ALTER TABLE "ERWIN9"."PSNL_CHK"
	ADD (FOREIGN KEY ("STLM_NO") REFERENCES "ERWIN9"."STLM" ("STLM_NO") ON DELETE CASCADE);

ALTER TABLE "ERWIN9"."PSTMNORD"
	ADD (FOREIGN KEY ("STLM_NO") REFERENCES "ERWIN9"."STLM" ("STLM_NO") ON DELETE CASCADE);

ALTER TABLE "ERWIN9"."RPTP"
	ADD (FOREIGN KEY ("RPTP_NO") REFERENCES "ERWIN9"."EMP" ("EMP_NO"));

ALTER TABLE "ERWIN9"."RPTP"
	ADD (FOREIGN KEY ("WRTR_NO") REFERENCES "ERWIN9"."EMP" ("EMP_NO"));

CREATE  PROCEDURE "byroyalty" 
--   (<argument name> <in out nocopy> <argument datatype> <default value>)
AS
BEGIN
   select au_id 
   from titleauthor
   where titleauthor.royaltyper = @percentage;
END;
/



CREATE  PROCEDURE "reptq1" 
--   (<argument name> <in out nocopy> <argument datatype> <default value>)
AS
BEGIN
   select 
	case when grouping(pub_id) = 1 then 'ALL' 
             else pub_id end as pub_id, avg(price) as avg_price
   from titles
   where price is NOT NULL
   group by pub_id with rollup
   order by pub_id;
END;
/



CREATE  PROCEDURE "reptq2" 
--   (<argument name> <in out nocopy> <argument datatype> <default value>)
AS
BEGIN
   select 
      case when grouping(type) = 1 then 'ALL' 
      else type end as type, 
      case when grouping(pub_id) = 1 then 'ALL' 
      else pub_id end as pub_id, avg(ytd_sales) as avg_ytd_sales
   from titles
   where pub_id is NOT NULL
   group by pub_id, type with rollup;
END;
/



CREATE  PROCEDURE "reptq3x" 
--   (<argument name> <in out nocopy> <argument datatype> <default value>)
AS
BEGIN
   select 
      case when grouping(pub_id) = 1 then 'ALL' 
      else pub_id end as pub_id, 
      case when grouping(type) = 1 then 'ALL' 
      else type end as type, count(title_id) as cnt
   from titles
   where price >@lolimit AND price <@hilimit AND 
         type = @type OR type LIKE '%cook%'
   group by pub_id, type with rollup;
END;
/


